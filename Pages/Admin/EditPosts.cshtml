@page
@model Nexy.Pages.Admin.EditPostsModel
@{
    ViewData["Title"] = $"Редактирование постов — {Model.ModelName}";
}

<h1>Редактирование постов: @Model.ModelName</h1>

<form method="post" asp-page-handler="UpdateAll">
    @for (int i = 0; i < Model.Posts.Count; i++)
    {
        <div class="post-editor">
            <input type="hidden" name="PostsInput[@i].Id" value="@Model.Posts[i].Id" />

            <label>Image URL:</label>
            <input type="text" name="PostsInput[@i].ImageUrl" value="@Model.Posts[i].ImageUrl" />

            <label>Caption:</label>
            <textarea name="PostsInput[@i].Caption">@Model.Posts[i].Caption</textarea>

            <label>NSFW:</label>
            <input type="checkbox" name="PostsInput[@i].IsNsfw" value="true" @(Model.Posts[i].IsNsfw ? "checked" : "") />
            <input type="hidden" name="PostsInput[@i].IsNsfw" value="false" />

            <hr />
        </div>
    }

    <button type="submit">Сохранить все</button>
</form>