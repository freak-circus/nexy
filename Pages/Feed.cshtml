@page
@model Nexy.Pages.FeedModel
@{
    Layout = "_Layout";
}

<div class="container">
    <h2 class="text-2xl font-bold text-white mb-6">Лента</h2>

    <div id="post-container" class="space-y-4">
        <partial name="_FeedPostListPartial" model="Model.Posts" />
    </div>

    <button id="load-more" class="load-more">
        Загрузить ещё
    </button>
</div>

<script>
    let loaded = @Model.LoadedCount;

    document.getElementById("load-more").addEventListener("click", function () {
        fetch(`/Feed?handler=LoadMore&skip=${loaded}`)
            .then(response => response.text())
            .then(html => {
                const container = document.getElementById("post-container");
                container.insertAdjacentHTML("beforeend", html);
                loaded += 10;
            });
    });
</script>